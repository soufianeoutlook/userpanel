CREATE DATABASE IF NOT EXISTS agorawin;\nUSE agorawin;\n\nCREATE TABLE IF NOT EXISTS users (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) DEFAULT '',\n  phone VARCHAR(20) NOT NULL UNIQUE,\n  email VARCHAR(255) DEFAULT NULL,\n  pin VARCHAR(10) NOT NULL,\n  branch VARCHAR(10) DEFAULT '01',\n  is_active TINYINT(1) DEFAULT 1,\n  join_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS stamp_cards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  serial_number VARCHAR(50) NOT NULL UNIQUE,\n  description TEXT DEFAULT NULL,\n  image_url VARCHAR(255) DEFAULT NULL,\n  total_stamps INT DEFAULT 10,\n  status ENUM('active', 'inactive') DEFAULT 'active',\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS user_stamp_cards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  stamp_card_id INT NOT NULL,\n  current_stamps INT DEFAULT 0,\n  activation_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (user_id) REFERENCES users(id),\n  FOREIGN KEY (stamp_card_id) REFERENCES stamp_cards(id)\n);\n\nCREATE TABLE IF NOT EXISTS gift_cards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  name VARCHAR(255) NOT NULL,\n  serial_number VARCHAR(50) NOT NULL UNIQUE,\n  description TEXT DEFAULT NULL,\n  type VARCHAR(50) DEFAULT NULL,\n  usage_limit INT DEFAULT 1,\n  validity_days INT DEFAULT 30,\n  status ENUM('unclaimed', 'claimed', 'used') DEFAULT 'unclaimed',\n  expiry_date DATETIME DEFAULT NULL,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n);\n\nCREATE TABLE IF NOT EXISTS user_gift_cards (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  gift_card_id INT NOT NULL,\n  claim_date DATETIME DEFAULT CURRENT_TIMESTAMP,\n  used_date DATETIME DEFAULT NULL,\n  FOREIGN KEY (user_id) REFERENCES users(id),\n  FOREIGN KEY (gift_card_id) REFERENCES gift_cards(id)\n);\n\nCREATE TABLE IF NOT EXISTS policy_pages (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  title VARCHAR(255) NOT NULL,\n  slug VARCHAR(100) NOT NULL UNIQUE,\n  content TEXT NOT NULL,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Insert test data\nINSERT INTO users (name, phone, email, pin, branch, is_active, join_date) \nVALUES ('Test User', '0123456789', 'test@example.com', '1234', '01', 1, NOW());\n\nINSERT INTO stamp_cards (name, serial_number, description, total_stamps, status)\nVALUES \n('بطاقة الولاء الذهبية', 'CARD001', 'بطاقة ولاء ذهبية تمنحك مكافآت حصرية', 10, 'active'),\n('بطاقة القهوة', 'CARD002', 'احصل على قهوة مجانية بعد 10 طوابع', 10, 'active'),\n('بطاقة المطعم', 'CARD003', 'احصل على وجبة مجانية بعد 8 طوابع', 8, 'active');\n\nINSERT INTO gift_cards (name, serial_number, description, type, status)\nVALUES \n('هدية عيد الميلاد', 'GIFT001', 'هدية خاصة بمناسبة عيد ميلادك', 'birthday', 'unclaimed'),\n('هدية الترحيب', 'GIFT002', 'هدية ترحيبية للأعضاء الجدد', 'welcome', 'unclaimed'),\n('هدية المناسبات', 'GIFT003', 'هدية خاصة بالمناسبات', 'special', 'unclaimed');\n\nINSERT INTO policy_pages (title, slug, content)\nVALUES \n('سياسة الخصوصية', 'privacy-policy', '<h2>سياسة الخصوصية</h2><p>نحن في ExpressWin نقدر خصوصيتك ونلتزم بحماية بياناتك الشخصية.</p>'),\n('شروط الخدمة', 'terms-of-service', '<h2>شروط الخدمة</h2><p>مرحبًا بك في ExpressWin. تحكم شروط الخدمة هذه استخدامك لتطبيقنا وخدماتنا.</p>');
